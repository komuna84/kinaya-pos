<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <meta name="theme-color" content="#0b0b0b" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="description"
        content="Kinaya Rising POS ‚Äî Create and manage purchase orders, track payments, and process returns in a unified Kinaya interface." />
  <title>Kinaya Rising POS ‚Äî Purchase Order</title>


  <!-- ===== GLOBAL FONTS & ICONS ===== -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    crossorigin="anonymous"
    referrerpolicy="no-referrer" />
  <link
    href="https://fonts.googleapis.com/css2?family=Audiowide&family=Roboto:wght@300;400;700&display=swap"
    rel="stylesheet" />
  <!-- üåø Kinaya Rising POS ‚Äî Favicon + PWA -->
<link rel="icon" href="assets/favicon.ico" type="image/x-icon">
<link rel="apple-touch-icon" sizes="192x192" href="assets/favicon-192.png">
<link rel="manifest" href="assets/manifest.json">
<meta name="theme-color" content="#00c6ff">

  <!-- ===== KINAYA UNIFIED STYLES ===== -->
  <link rel="stylesheet" href="styles/kinaya-base.css" />
  <link rel="stylesheet" href="styles/pos.css" />

  <!-- ===== ACCESS LOCK ===== -->
  <script>
    if (sessionStorage.getItem("posUnlocked") !== "true") {
      window.location.href = "index.html";
    }
  </script>
</head>

<body class="sale-page">

  <!-- ===== HEADER ===== -->
  <header class="pos-header">
    <h1>Purchase Order</h1>
    <p class="subtitle">Nos vortoaj fu wa kinayo. May our words bring understanding.</p>
    <div id="return-mode-banner" class="return-banner">üî¥ RETURN MODE ACTIVE</div>
  </header>

  <!-- ===== MAIN CONTENT ===== -->
  <main class="main-container flex-row" role="main">
    
  <!-- View Product Modal -->
  <!-- <button id="open-menu-modal">
  <i class="fa-solid fa-store"></i> View Products
</button>

<section id="menu-modal" class="modal-overlay" style="display:none;">
  <div class="modal-content">
    <div class="modal-header">
      <h3>Product Catalog</h3>
      <button class="close-btn" id="close-menu-modal">‚úï</button>
    </div>
    <div id="modal-menu-grid" class="menu grid"></div>
  </div>
</section> -->


  <!-- ===== RECEIPT / ORDER SECTION ===== -->
<section class="order flex-column glass-panel">
  <article class="receipt flex-column">

    <!-- üè∑Ô∏è Company Info -->
    <div class="company-info flex-column">
      <p id="company-name">Kinaya Rising</p>
      <p id="company-website">KinayaRising.com</p>
      <p id="company-email">KinayaRising@gmail.com</p>
      <p id="invoice-number">Invoice #Loading...</p>
      <p id="current-date"></p>
    </div>

    <!-- üîç Invoice Search -->
    <div class="invoice-search" id="search-container">
      <div class="search-row">
        <input id="invoice-search-input" placeholder="Enter invoice number" />
        <button id="invoice-search-btn">Search</button>
      </div>
      <div id="invoice-result"></div>
    </div>

    <!-- üîó Return Input (optional) -->
    <div class="return-link-section hidden" id="return-container">
      <label for="original-invoice">Original Invoice # (for returns):</label>
      <input type="text" id="original-invoice" placeholder="If returning items" />
    </div>

    <!-- üßæ Unified Receipt -->
    <div class="receipt-details">
      <table class="details-table">
        <thead>
          <tr><td class="dotted-border" colspan="5"></td></tr>
          <tr>
            <th>Product</th>
            <th>Qty</th>
            <th>Price</th>
            <th>Sub</th>
            <th>Del</th>
          </tr>
          <tr><td class="dotted-border" colspan="5"></td></tr>
        </thead>
        <tbody id="receipt-details"></tbody>
      </table>

      <!-- üíµ Summary Section -->
      <div class="receipt-summary">
        <table class="summary-table">
          <tbody id="summary-section">

            <!-- üéÅ Discount -->
            <tr>
              <td>Discount:</td>
              <td><input type="text" id="discount-input" placeholder="0 or 10%" /></td>
            </tr>
            <tr id="discount-row">
              <td>Discount Value:</td>
              <td id="discount-display">$0.00</td>
            </tr>

            <!-- üí∞ Totals -->
            <tr><td>Subtotal:</td><td id="subtotal-summary">$0.00</td></tr>
            <tr><td>Tax:</td><td id="tax-summary">$0.00</td></tr>
            <tr><td>Grand Total:</td><td id="grandtotal-summary">$0.00</td></tr>
            <tr><td>Amount Paid:</td><td id="amount-paid-display" class="glow-text">$0.00</td></tr>
            <tr id="change-row"><td>Change:</td><td id="change-amount">$0.00</td></tr>

            <!-- üåø Divider -->
            <tr class="summary-divider">
              <td colspan="2"><hr style="border:1px dashed rgba(0,198,255,0.3);"></td>
            </tr>

            <!-- üîÅ RETURN SUMMARY -->
            <tr id="return-summary-row" class="hidden">
              <td colspan="2" style="padding-top: 0.75rem;">
                <div style="text-align:center; font-size:1.05em; color:#66caff; margin-bottom:4px;">
                  Return Summary
                </div>
                <div style="text-align:center; color:#66caff; margin-bottom:8px;">
                  Invoice <span id="linked-invoice-number" style="color:#66caff;">#‚Äî</span>
                </div>

                <table style="width:100%; border-collapse:collapse;">
                  <tr>
                    <td style="text-align:left;">Original Purchase Amount:</td>
                    <td style="text-align:right;">
                      <span id="original-total" style="color:#A7E1EE;">$0.00</span>
                    </td>
                  </tr>
                  <tr>
                    <td style="text-align:left;">Returned Items Total:</td>
                    <td style="text-align:right;">
                      <span id="return-total" style="color:#ff8080;">$0.00</span>
                    </td>
                  </tr>
                </table>
              </td>
            </tr>

            <!-- Hidden numeric reference for refund logic -->
            <tr><td colspan="2"><input type="hidden" id="refund-amount" value="0" /></td></tr>

            <!-- üí≥ Payment Info -->
            <tr><td>Payment Type:</td><td id="split-info">None</td></tr>

            <!-- üìß Email -->
            <tr>
              <td>Email:</td>
              <td><input type="email" id="customer-email" placeholder="customer@example.com" /></td>
            </tr>
            <tr>
              <td>Share Email?</td>
              <td>
                <label class="switch">
                  <input type="checkbox" id="email-toggle" checked />
                  <span class="slider"></span>
                </label>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- ‚úÖ Submit Button -->
<div id="submit-row" class="submit-row" style="display:none;">
  <button id="submit-sale" class="submit-sale-btn" disabled>Confirm Sale</button>
</div>


    <div class="receipt-footer">Thank You For Your Support!</div>

    <!-- ===== TOOLBAR ===== -->
    <div class="toolbar flex-row">
      <button id="cash-btn" class="toolbar-btn" title="Cash Payment">
        <i class="fa-solid fa-money-bill-wave"></i>
      </button>
      <button id="card-btn" class="toolbar-btn" title="Card Payment">
        <i class="fa-solid fa-credit-card"></i>
      </button>
      <button id="clear-btn" class="toolbar-btn" title="Clear Order">
        <i class="fa-solid fa-trash"></i>
      </button>
      <button id="toggle-return-main" class="toolbar-btn" title="Toggle Return Mode">
        <i class="fa-solid fa-rotate-left"></i>
      </button>
    </div>

  </article>
</section>


<!-- ============================================================
üåø KINAYA RISING POS ‚Äî PRODUCT GRID + MODALS
============================================================ -->

<!-- üñ•Ô∏è Always-visible product grid for desktop/tablet -->
<section class="menu-payment grid" id="menu-section">
  <div class="menu flex-row" id="menu"></div>

<!-- üîí Review overlay -->
  <div id="menu-lock-overlay" class="menu-lock hidden">
    <div class="overlay-content">
      <button id="unlock-grid-btn">üîì Unlock Editing</button>
      <p>Product grid locked during review</p>
    </div>
  </div>
</section>

  <!-- ===== FOOTER NAVIGATION ===== -->
  <nav class="kinaya-nav">
    <a href="sale.html" class="nav-btn active">
      <i class="fas fa-cash-register"></i><span>Sales</span>
    </a>
    <a href="inventory.html" class="nav-btn">
      <i class="fas fa-boxes"></i><span>Inventory</span>
    </a>
    <a href="expense-log.html" class="nav-btn">
      <i class="fas fa-receipt"></i><span>Expenses</span>
    </a>
    <a href="data.html" class="nav-btn">
      <i class="fas fa-chart-line"></i><span>Data</span>
    </a>
  </nav>

  <!-- üí∞ PAYMENT OVERLAY (PAYPAD) -->
<div id="payment-overlay" class="hidden">
  <div class="paypad" style="padding: 15px; position: relative;">
    
    <!-- Close Button -->
    <button id="close-paypad-btn" class="close-paypad-icon" style="padding: 10px; position: absolute; top: 10px; right: 10px;">
      <i class="fa-solid fa-xmark"></i>
    </button>

    <h2 class="paypad-title">Enter Payment</h2>

    <!-- Amount Owed Section -->
    <div class="owed-section">
      <div id="tax-status-row" style="text-align:center; font-size:0.9em; color:#66caff; margin-bottom:4px;">
        Tax Mode: On
      </div>

      <span class="owed-label">Amount Owed:</span>
      <span id="paypad-owed" class="owed-value">$0.00</span>
    </div>

    <!-- Display -->
    <div id="paypad-display" class="paypad-display" data-bind="amount-paid">
      $0.00
    </div>

    <!-- Keypad -->
    <div class="paypad-grid" style="padding: 15px;">
      <button class="paypad-btn" data-value="7">7</button>
      <button class="paypad-btn" data-value="8">8</button>
      <button class="paypad-btn" data-value="9">9</button>
      <button class="paypad-btn" data-value="‚Üê">‚Üê</button>

      <button class="paypad-btn" data-value="4">4</button>
      <button class="paypad-btn" data-value="5">5</button>
      <button class="paypad-btn" data-value="6">6</button>
      <button class="paypad-btn" data-value="C">C</button>

      <button class="paypad-btn" data-value="1">1</button>
      <button class="paypad-btn" data-value="2">2</button>
      <button class="paypad-btn" data-value="3">3</button>
      <button class="paypad-btn" data-value=".">.</button>

      <button class="paypad-btn" data-value="TAX">TAX</button>
      <button class="paypad-btn" data-value="0">0</button>
      <button class="paypad-btn" data-value="00">00</button>
      <button class="paypad-btn" data-value="%">%</button>
    </div>

    <!-- Confirm Button -->
    <div style="padding: 5px; text-align:center;">
      <button id="confirm-payment-btn" class="confirm-payment-btn glow-button">
        Confirm Payment
      </button>
    </div>

  </div> <!-- end .paypad -->
</div> <!-- end #payment-overlay -->

  <!-- ===== JS MODULES ===== -->
  <script src="scripts/sale.js" defer></script>

  <!-- ===== FIXED OVERLAY BEHAVIOR ===== -->
  <style>
  .overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.85);
    backdrop-filter: blur(6px);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 2000;
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
  }

  .overlay.active {
    display: flex;
    opacity: 1;
    pointer-events: all;
  }

  .hidden {
    display: none !important;
  }
  </style>
</body>
</html>
