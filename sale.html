<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
  <title>Kinaya Rising POS â€” Sales</title>

  <!-- ====== BASE STYLES ====== -->
  <style>
    html, body {
      margin: 0;
      padding: 0;
      touch-action: manipulation;
      overscroll-behavior: contain;
      font-family: "Roboto", sans-serif;
      background-color: #0b0b0b;
      color: #A7E1EE;
    }
  </style>

  <!-- Fonts & Icons -->
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
        crossorigin="anonymous"
        referrerpolicy="no-referrer" />
  <link href="https://fonts.googleapis.com/css2?family=Audiowide&family=Roboto:wght@300;400;700&display=swap"
        rel="stylesheet" />

  <link rel="stylesheet" href="styles.css" />
  <script src="script.js" defer></script>
</head>

<body>
  <header>
    <h1>Kinaya Rising Purchase Order</h1>
    <p id="current-date"></p>
  </header>

  <main class="main-container flex-row">
    <!-- =============== RECEIPT / ORDER SECTION =============== -->
    <section class="order flex-column">
      <article class="receipt flex-column">
        <div class="company-info flex-column">
          <p>Kinaya Rising</p>
          <p>KinayaRising.com</p>
          <p>KinayaRising@gmail.com</p>
          <p id="invoice-number">Invoice #1000</p>
        </div>

        <div class="receipt-details">
          <table class="details-details">
            <thead>
              <tr>
                <th>Product</th>
                <th>Qty</th>
                <th>Price</th>
                <th>Sub</th>
                <th>Del</th>
              </tr>
            </thead>
            <tbody id="receipt-details"></tbody>
          </table>

          <div class="receipt-summary">
            <table class="summary-table">
              <tbody>
                <tr><td>Subtotal:</td><td id="subtotal-summary">$0.00</td></tr>
                <tr><td>Tax:</td><td id="tax-summary">$0.00</td></tr>
                <tr><td>Grand Total:</td><td id="grandtotal-summary">$0.00</td></tr>
                <tr><td>Payment:</td><td id="payment-type">Cash</td></tr>
                <tr><td>Split:</td><td id="split-info">None</td></tr>
              </tbody>
            </table>

            <div style="text-align:center; margin-top:1rem;">
              <button id="submit-sale" class="submit-sale-btn">Submit Sale</button>
            </div>
          </div>
        </div>

        <div class="receipt-footer">Thank You For Your Support!</div>

        <div class="toolbar flex-row">
          <button id="cash-btn" class="toolbar-btn" title="Cash Payment"><i class="fa-solid fa-money-bill-wave"></i></button>
          <button id="card-btn" class="toolbar-btn" title="Card Payment"><i class="fa-solid fa-credit-card"></i></button>
          <button id="clear-order-btn" class="toolbar-btn" title="Clear Order"><i class="fa-solid fa-trash"></i></button>
          <button id="toggle-return" class="toolbar-btn" title="Toggle Return Mode"><i class="fa-solid fa-rotate-left"></i></button>
        </div>
      </article>
    </section>

    <!-- =============== MENU SECTION =============== -->
    <section class="menu-payment grid">
      <div class="menu flex-row" id="menu"></div>
    </section>
  </main>

  <!-- Paypad Overlay -->
  <div id="payment-overlay">
    <div class="paypad" id="paypad">
      <button id="close-paypad-btn" class="paypad-close"><i class="fa-solid fa-xmark"></i></button>
      <div id="paypad-display" class="paypad-display">$0.00</div>
      <button class="paypad-btn number" data-id="7">7</button>
      <button class="paypad-btn number" data-id="8">8</button>
      <button class="paypad-btn number" data-id="9">9</button>
      <button class="paypad-btn number" data-id="4">4</button>
      <button class="paypad-btn number" data-id="5">5</button>
      <button class="paypad-btn number" data-id="6">6</button>
      <button class="paypad-btn number" data-id="1">1</button>
      <button class="paypad-btn number" data-id="2">2</button>
      <button class="paypad-btn number" data-id="3">3</button>
      <button class="paypad-btn number" data-id="0">0</button>
      <button class="paypad-btn" data-id="back">Back</button>
      <button class="paypad-btn" data-id="clear">Clear</button>
      <button class="paypad-btn span3-col" data-id="close-sale">Enter</button>
    </div>
  </div>

  <!-- Navigation -->
  <nav class="kinaya-nav">
    <a href="sale.html" class="nav-btn active"><i class="fas fa-cash-register"></i><span>Sales</span></a>
    <a href="inventory.html" class="nav-btn"><i class="fas fa-boxes"></i><span>Inventory</span></a>
    <a href="data.html" class="nav-btn"><i class="fas fa-chart-line"></i><span>Data</span></a>
  </nav>

  <!-- ====== REBIND CLICK EVENTS ====== -->
  <script>
    document.addEventListener("click", e => {
      const menuItem = e.target.closest(".menu-item");
      if (menuItem) {
        const data = menuItem.getAttribute("data-sku");
        order.addOrderLine(1, data);
      }

      // Toolbar handlers
      if (e.target.closest("#cash-btn")) {
        document.getElementById("payment-type").textContent = "Cash";
      }
      if (e.target.closest("#card-btn")) {
        document.getElementById("payment-type").textContent = "Card";
      }
      if (e.target.closest("#clear-order-btn")) {
        order._order = [];
        Ui.receiptDetails(order);
        Ui.updateTotals(order);
      }
    });
  </script>
</body>
</html>
