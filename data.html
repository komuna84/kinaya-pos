<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <title>Kinaya Rising â€” Business Dashboard</title>

  <!-- ===== META ===== -->
  <meta name="description"
        content="Kinaya Rising Business Dashboard â€” track revenue, profit, customer insights, and inventory analytics with unified Kinaya design." />

  <!-- ===== GLOBAL FONTS & ICONS ===== -->
  <link rel="icon" href="assets/favicon.png" type="image/png" />
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
        crossorigin="anonymous"
        referrerpolicy="no-referrer" />
  <link
    href="https://fonts.googleapis.com/css2?family=Audiowide&family=Roboto:wght@300;400;700&display=swap"
    rel="stylesheet" />

  <!-- ===== UNIFIED KINAYA STYLES ===== -->
  <link rel="stylesheet" href="styles/kinaya-base.css?v=7" />
  <link rel="stylesheet" href="styles/dashboard.css?v=7" />

  <!-- ===== ACCESS LOCK ===== -->
  <script>
    if (sessionStorage.getItem("posUnlocked") !== "true") {
      window.location.href = "index.html";
    }
  </script>
</head>

<body>
  <!-- ===== HEADER ===== -->
  <header>
    <h1>Business Dashboard</h1>
    <p class="subtitle">Unified overview of your sales, inventory, and performance</p>
  </header>

  <!-- ===== CONTROLS ===== -->
  <section class="dashboard-controls">
    <label>View:
      <select id="view-select">
        <option value="daily">Daily</option>
        <option value="monthly" selected>Monthly</option>
        <option value="quarterly">Quarterly</option>
        <option value="yearly">Yearly</option>
      </select>
    </label>

    <label>Range:</label>
    <input type="date" id="start-date" />
    <span>to</span>
    <input type="date" id="end-date" />

    <label>Compare:
      <label class="switch">
        <input type="checkbox" id="compare-toggle" />
        <span class="slider"></span>
      </label>
    </label>

    <button id="refresh-btn" class="small-btn glow">ðŸ”„ Refresh</button>
  </section>

  <!-- ===== MAIN DASHBOARD ===== -->
  <main role="main" class="dashboard">

    <!-- A. SALES PERFORMANCE -->
    <section class="panel">
      <h2>Sales Performance</h2>
      <div class="metric"><span>Total Revenue</span><strong id="total-revenue">$0.00</strong></div>
      <div class="metric"><span>Gross Profit</span><strong id="gross-profit">$0.00</strong></div>
      <div class="metric"><span>Net Profit</span><strong id="net-profit">$0.00</strong></div>
      <div class="metric"><span>Avg Transaction Value</span><strong id="avg-transaction">$0.00</strong></div>
      <div class="metric"><span>Units Sold</span><strong id="units-sold">0</strong></div>
      <canvas id="sales-trend" height="100"></canvas>
      <button type="button" class="glow-button">Email Sales Report</button>
    </section>

    <!-- B. CUSTOMER INSIGHTS -->
    <section class="panel">
      <h2>Customer Insights</h2>
      <p>Number of Transactions <span id="num-transactions">0</span></p>
<p>Repeat Customers <span id="repeat-customers">0%</span></p>
<p>Avg Items per Sale <span id="avg-items-sale">0</span></p>
<p>Customer Emails Collected <span id="emails-collected">0</span></p>
<p>Refund Rate <span id="refund-rate">0%</span></p>
      <canvas id="customer-chart" height="100"></canvas>
      <button type="button" class="glow-button">Email Customer Report</button>
    </section>

    <!-- C. PRODUCT ANALYTICS -->
    <section class="panel">
      <h2>Product Analytics</h2>
      <div class="metric"><span>Top-Selling Products</span><strong id="top-products">â€“</strong></div>
      <div class="metric"><span>Lowest Stocked Products</span><strong id="low-stock-products">â€“</strong></div>
      <div class="metric"><span>Profit Margin (Avg)</span><strong id="profit-margin">0%</strong></div>
      <div class="metric"><span>Total SKUs Active</span><strong id="total-skus">0</strong></div>
      <canvas id="product-chart" height="100"></canvas>
      <button type="button" class="glow-button">Email Product Report</button>
    </section>

    <!-- D. TAX & ACCOUNTING SUMMARY -->
    <section class="panel">
      <h2>Tax & Accounting Summary</h2>
      <div class="metric"><span>Gross Revenue (Before Tax)</span><strong id="gross-revenue">$0.00</strong></div>
      <div class="metric"><span>Tax Collected</span><strong id="tax-collected">$0.00</strong></div>
      <div class="metric"><span>Expenses Logged</span><strong id="expenses">$0.00</strong></div>
      <div class="metric"><span>Net Profit</span><strong id="account-net-profit">$0.00</strong></div>
      <canvas id="accounting-chart" height="100"></canvas>
      <button type="button" class="glow-button">Email Accounting Report</button>
    </section>

    <!-- E. INVENTORY OVERVIEW -->
<section class="panel">
  <h2>Inventory Overview</h2>

  <div class="metric"><span>Total Units In Stock</span><strong id="inv-total-units">0</strong></div>
  <div class="metric"><span>Total Stock Value</span><strong id="inv-stock-value">$0.00</strong></div>
  <div class="metric"><span>Average Cost per SKU</span><strong id="inv-avg-cost">$0.00</strong></div>
  <div class="metric"><span>Low Stock Items (â‰¤5)</span><strong id="inv-low-stock">0</strong></div>
  <div class="metric"><span>Active SKUs</span><strong id="inv-active-skus">0</strong></div>

  <canvas id="inventory-chart" height="100"></canvas>
  <button type="button" class="glow-button">Email Inventory Report</button>
</section>

  </main>

  <!-- ===== NAVIGATION ===== -->
  <nav class="kinaya-nav" aria-label="Main navigation">
    <a href="sale.html" class="nav-btn"><i class="fas fa-cash-register"></i><span>Sales</span></a>
    <a href="inventory.html" class="nav-btn"><i class="fas fa-boxes"></i><span>Inventory</span></a>
    <a href="data.html" class="nav-btn active"><i class="fas fa-chart-line"></i><span>Data</span></a>
  </nav>

  <!-- ===== DEFAULT RANGE INITIALIZER ===== -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const today = new Date();
      const firstDay = new Date(today.getFullYear(), today.getMonth(), 1);

      const startInput = document.getElementById("start-date");
      const endInput = document.getElementById("end-date");

      // Pre-fill current month
      startInput.value = firstDay.toISOString().split("T")[0];
      endInput.value = today.toISOString().split("T")[0];
    });
  </script>

  <!-- ===== CHARTS & DASHBOARD LOGIC ===== -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="scripts/dashboard.js?v=7" defer></script>
</body>
</html>
